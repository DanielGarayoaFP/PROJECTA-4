üìù **Guia de configuraci√≥ de xarxa i SSH**
1. Assignar la IP

Per veure la configuraci√≥ de xarxa de la m√†quina i saber quina IP t√©:

ip addr show


Si vols configurar una IP manualment (exemple):

sudo nano /etc/netplan/01-netcfg.yaml


Exemple de configuraci√≥:

<img width="659" height="114" alt="B4" src="https://github.com/user-attachments/assets/e36dd385-2b9d-46d3-80a7-aa7f872b6860" />


<img width="732" height="201" alt="B2" src="https://github.com/user-attachments/assets/7d8c2038-49c1-461e-a883-ac322f10fdc0" />

Aplicar els canvis:
sudo netplan apply

2. Instal¬∑lar SSH

Per instal¬∑lar el servei SSH:

sudo apt update
sudo apt install ssh

<img width="350" height="50" alt="B6" src="https://github.com/user-attachments/assets/e6bd9b8c-c49c-44ca-96df-e383edcd52a8" />

<img width="550" height="300" alt="B3" src="https://github.com/user-attachments/assets/3d61505a-38cb-49cb-a884-0a238c5ddad5" />

Comprovar que est√† actiu:

systemctl status ssh

3. Connectar des de Windows

A Windows pots connectar-te al servidor Linux amb:

Opci√≥ 1: PowerShell / CMD
ssh usuari@IP_DEL_SERVIDOR

<img width="658" height="338" alt="B7" src="https://github.com/user-attachments/assets/b192d1fa-9cd6-47fc-99e7-318d926203fa" />

--
Si volem desactivar l‚Äôus de root en conexions ssh per garantir una major seguretat haurem d‚Äôeditar l‚Äôarxiu /etc/ssh/sshd_config

<img width="873" height="520" alt="1" src="https://github.com/user-attachments/assets/526783fc-da60-47d5-aa2f-7c8e1c5a945f" />

<img width="873" height="520" alt="2" src="https://github.com/user-attachments/assets/6866d38f-4a2c-44ca-80f2-b03e875fa0c5" />


Fent aix√≤ indiquem que el port de connexi√≥ es el 20 (Port 20) i no permitim connexions a root (PermitRootLogin prohibit-password).

<img width="422" height="68" alt="3" src="https://github.com/user-attachments/assets/0e50de6f-a398-462f-9e84-d01994c9023a" />

Ara podem fer una llista d‚Äôusuaris autoritzats a la connexi√≥ remota modificant l‚Äôarxiu anterior (sudo nano /etc/ssh/sshd_config) afegint la l√≠nea.

```bash
AllowUsers {usuaris separats per comes}
```

<img width="629" height="319" alt="4" src="https://github.com/user-attachments/assets/ab40230a-eb77-4bcd-824b-f898d9bee0fe" />


Per fer comprovaci√≥, crearem un nou usuari (usuari2) i provarem de conectarnos per ssh amb aquest.

```bash
sudo adduser usuari2
```
```bash
ssh usuari2@192.168.56.106
```

<img width="445" height="74" alt="B18" src="https://github.com/user-attachments/assets/b12a695f-40c3-48a2-a83e-79143575b81f" />

Com a resultat tindrem l‚Äôacces denegat!!

Ara tot el tr√†nsit desde el client s‚Äôenvia com si fos el servidor, pero si volem afegir una redirecci√≥n din√†mica (dynamic forwarding) ens hem de conectar amb una variaci√≥ a la comanda.

```bash
ssh -D 9876 usuari@192.168.56.106
```

--
Entrem a la maquina de windows i cambiem les opcions de internet.


<img width="424" height="588" alt="B9 0" src="https://github.com/user-attachments/assets/b3dc5234-be48-450d-802b-0c5acadb9621" />


<img width="391" height="436" alt="B9" src="https://github.com/user-attachments/assets/0b56b186-9337-42bd-b0c3-d00166870f4c" />

Click a Open

4. Analitzar el tr√†fic amb Wireshark

Obrir Wireshark a Windows


<img width="305" height="84" alt="B11" src="https://github.com/user-attachments/assets/3a4dae69-6326-4544-8979-4c111d8d0e32" />


Seleccionar la interf√≠cie de xarxa connectada

Filtrar per connexions SSH:


<img width="751" height="581" alt="B12" src="https://github.com/user-attachments/assets/1d6c98e4-c227-4f6d-aef0-95b8e3bfaee9" />


tcp.port == 22

Comen√ßar la captura i observar els paquets entre Windows ‚Üî Linux.

## Inici sessi√≥ amb SSH keys

> En el client

ssh-keygen -t rsa

ls -\.ssh\

<img width="702" height="415" alt="13" src="https://github.com/user-attachments/assets/53fbcd72-ccbb-4678-a057-1d2dd1584062" />


scp .\.ssh\id_rsa.pub usuari@192.168.56.109:


<img width="537" height="189" alt="B14" src="https://github.com/user-attachments/assets/dc42c262-ff74-4be0-a19c-4e4c52d6d4ff" />


 Anirem al servidor

mkdir .ssh
touch .ssh/authorized_keys
ls
cat id_rsa.pub
cat id_rsa.pub >> .ssh/ .ssh/authorized_keys

<img width="1108" height="215" alt="Captura de pantalla 2025-12-03 204200" src="https://github.com/user-attachments/assets/61e7a386-da18-47e6-864f-5e59044176d1" />

Un cop acabat de posar tots als comandas anirem al client i farem:

ssh usuari@192.168.56.109

Si has fet be tots els pasos no et demanara la contrase√±a
